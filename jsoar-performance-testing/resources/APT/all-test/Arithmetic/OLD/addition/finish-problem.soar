sp {addition*propose*finish-problem
   (state <s> ^name addition
              ^addition-problem.current-column <c>)
   (<c> ^sum
        ^next-column nil)
-->
   (<s> ^operator <op> + =)
   (<op> ^name finish-problem)
}

sp {addition*apply*finish-problem*1column*sum
   (state <s> ^name addition
              ^operator.name finish-problem
              ^addition-problem <ap>)
   (<ap> ^one-column <oc>)
   (<oc> ^adden1 <n1>
         ^adden2 <n2>
         ^sum <n3>
         ^next-column nil)
-->
   (write (crlf) | | <n1> )
   (write (crlf) |+| <n2> )
   (write (crlf) |---|)
   (write (crlf) | | <n3> )
   (halt)
}
sp {addition*apply*finish-problem*2column*sum
   (state <s> ^name addition
              ^operator.name finish-problem
              ^addition-problem <ap>)
   (<ap> ^one-column <oc>)
   (<oc> ^adden1 <n1>
         ^adden2 <n2>
         ^sum <a1>
         ^next-column <tc>)
   (<tc> ^adden1 <n3>
         ^adden2 <n4>
         ^sum <a2>
         ^next-column nil)
-->
   (write (crlf) | | <n3> <n1> )
   (write (crlf) |+| <n4> <n2> )
   (write (crlf) |----|)
   (write (crlf) | | <a2> <a1>)
   (halt)
}
sp {addition*apply*finish-problem3*column*sum
   (state <s> ^name addition
              ^operator.name finish-problem
              ^addition-problem <ap>)
   (<ap> ^one-column <oc>)
   (<oc> ^adden1 <n1>
         ^adden2 <n2>
         ^sum <a1>
         ^next-column <tc>)
   (<tc> ^adden1 <n3>
         ^adden2 <n4>
         ^sum <a2>
         ^next-column <vc>)
   (<vc> ^adden1 <n5>
         ^adden2 <n6>
         ^sum <a3>
         ^next-column nil)
-->
   (write (crlf) | |<n5> <n3> <n1> )
   (write (crlf) |+| <n6> <n4> <n2> )
   (write (crlf) |----|)
   (write (crlf) | | <a3> <a2> <a1>)
   (halt)
}